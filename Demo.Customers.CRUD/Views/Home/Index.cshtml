@{
    ViewData["Title"] = "CRUD Demo";
}

<div class="row">
    <div class="col-12" style="height:1000px">
        <div id="jsGrid"></div>
    </div>
</div>

<script>
    $(function() {

        $("#jsGrid").jsGrid({
            height: "50%",
            width: "100%",

            heading: true,
            selecting: true,

            inserting: true,
            editing: true,
            autoload: true,

            pageSize: 10,
            pageButtonCount: 5,

            deleteConfirm: "Do you really want to delete customer?",

            controller: {
                loadData: function(filter) {
                    console.log('loading data');
                    return $.ajax({
                        type: "GET",
                        url: "/api/data/get",
                        data: filter,
                        dataType: "json"
                    }).done(function (response) {
                        console.log(response);
                        return;
                    });
                },

                insertItem: function(item) {
                    console.log('insert item');
                    console.log(item);

                    fetch('/api/data/post', {
                        method: 'POST',
                        headers: {
                            'Accept': 'application/json',
                            'Content-Type': 'application/json'
                        },
                        body: JSON.stringify(item)
                    })
                    .then(res => res.json())
                    .then(function (data) {
                        console.log(data);
                    });
                },

                updateItem: function(item) {
                    console.log('update item');
                    console.log(item);

                    fetch('/api/data/put', {
                        method: 'PUT',
                        headers: {
                            'Accept': 'application/json',
                            'Content-Type': 'application/json'
                        },
                        body: JSON.stringify(item)
                    })
                    .then(res => res.json())
                    .then(function (data) {
                        console.log(data);
                    });
                },

                deleteItem: function(item) {
                    console.log('delete item');
                    console.log(item);

                    fetch('/api/data/delete', {
                        method: 'DELETE',
                        headers: {
                            'Accept': 'application/json',
                            'Content-Type': 'application/json'
                        },
                        body: JSON.stringify(item.id)
                    })
                    .then(res => res.json())
                    .then(function (data) {
                        console.log(data);
                    });
                }
            },

            fields: [
                { name: "name", type: "text", width: 150 },
                { name: "address", type: "text", width: 150 },
                { type: "control" }
            ],
        });

    });
</script>